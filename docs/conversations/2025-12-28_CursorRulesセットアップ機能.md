# ğŸ“ Cursor AI Rules ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ©Ÿèƒ½ å®Ÿè£…å®Œäº†

## ğŸ‰ å®Ÿè£…ã‚µãƒãƒªãƒ¼

**å®Ÿè£…æ—¥:** 2025-12-28  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³:** 0.1.3  
**æ©Ÿèƒ½:** .cursorrules è‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

---

## âœ… å®Ÿè£…å®Œäº†ã—ãŸæ©Ÿèƒ½

### ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ’¾ ä¿å­˜æ¸ˆã¿ã‚¯ã‚¨ãƒª] [ğŸ“ Cursor AIè¨­å®š] â”‚  â† NEW!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ï¼š
1. `.cursorrules` ã«QueryCanvasã®ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ 
2. æ—¢å­˜ã®ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚Œã°æœ«å°¾ã«è¿½åŠ 
3. QueryCanvasã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒæ—¢ã«ã‚ã‚Œã°æ›´æ–°ã‚’ç¢ºèª
4. å®Œäº†å¾Œã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã‹é¸æŠå¯èƒ½

### ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆå¯¾å¿œ

```
Cmd+Shift+P â†’ "QueryCanvas: Setup Cursor AI Rules"
```

---

## ğŸ“ å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«

### æ–°è¦ä½œæˆ

âœ… **`src/cursorRulesManager.ts`** (170è¡Œ)
- CursorRulesManagerã‚¯ãƒ©ã‚¹
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆ
- ã‚¹ãƒãƒ¼ãƒˆæ›´æ–°ãƒ­ã‚¸ãƒƒã‚¯
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

### å¤‰æ›´

âœ… **`src/extension.ts`**
- setupCursorRulesã‚³ãƒãƒ³ãƒ‰ç™»éŒ²
- CursorRulesManagerã‚¤ãƒ³ãƒãƒ¼ãƒˆ

âœ… **`src/databaseClientPanel.ts`**
- UIã«ã€ŒğŸ“ Cursor AIè¨­å®šã€ãƒœã‚¿ãƒ³è¿½åŠ 
- setupCursorRules() JavaScripté–¢æ•°
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ³ãƒ‰ãƒ©ãƒ¼è¿½åŠ 
- _handleSetupCursorRules() ãƒ¡ã‚½ãƒƒãƒ‰

âœ… **`package.json`**
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 0.1.3 ã«æ›´æ–°
- setupCursorRulesã‚³ãƒãƒ³ãƒ‰ç™»éŒ²

âœ… **`README.md`**
- Cursor AIçµ±åˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½åŠ 
- ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †æ›´æ–°

âœ… **`CHANGELOG.md`**
- v0.1.3 (Unreleased) ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ 

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

âœ… **`docs/CURSOR-RULES-SETUP-FEATURE.md`**
- æ©Ÿèƒ½ã®è©³ç´°èª¬æ˜
- ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰
- å®Ÿè£…è©³ç´°
- ãƒ†ã‚¹ãƒˆæ–¹æ³•

âœ… **`docs/conversations/2025-12-28_CursorRulesã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ©Ÿèƒ½.md`** (ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«)
- å®Ÿè£…è¨˜éŒ²

---

## ğŸ¯ å®Ÿè£…ã®ç‰¹å¾´

### 1. ã‚¹ãƒãƒ¼ãƒˆæ›´æ–°

```typescript
// æ—¢å­˜ã® .cursorrules ã‚’ç¢ºèª
if (fs.existsSync(cursorRulesPath)) {
    content = fs.readFileSync(cursorRulesPath, 'utf8');
    
    // æ—¢ã«QueryCanvasã®ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚‹ï¼Ÿ
    if (this.hasQueryCanvasSection(content)) {
        // æ›´æ–°ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
        const choice = await vscode.window.showWarningMessage(
            'QueryCanvasã®ãƒ«ãƒ¼ãƒ«ã¯æ—¢ã«å­˜åœ¨ã—ã¾ã™ã€‚æ›´æ–°ã—ã¾ã™ã‹ï¼Ÿ',
            'ã¯ã„', 'ã„ã„ãˆ'
        );
        
        if (choice === 'ã¯ã„') {
            // å¤ã„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤
            content = this.removeQueryCanvasSection(content);
        }
    }
}
```

### 2. ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ¤œå‡ºã¨å‰Šé™¤

```typescript
private static removeQueryCanvasSection(content: string): string {
    const lines = content.split('\n');
    let inQueryCanvasSection = false;
    
    // QueryCanvas ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã¦å‰Šé™¤
    // å‰å¾Œã®ç©ºè¡Œã‚‚æ•´ç†
    
    return result.join('\n');
}
```

### 3. ãƒªãƒƒãƒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```markdown
# QueryCanvas - Database Client Rules
# Auto-generated by QueryCanvas v0.1.3

## QueryCanvas Integration
- Session File
- SQL Display Options
- PowerPoint/Excel Copy
- Database Schema
- Best Practices
- Common Tasks
```

---

## ğŸ’¡ è¿½åŠ ã•ã‚Œã‚‹ãƒ«ãƒ¼ãƒ«å†…å®¹

### 1. ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«

```markdown
### Session File

**Location:** `.vscode/querycanvas-session.json`

**Example prompts:**
- Edit .vscode/querycanvas-session.json to add a WHERE clause
- Modify the SQL in the session file to add display options
```

### 2. è¡¨ç¤ºã‚ªãƒ—ã‚·ãƒ§ãƒ³

```markdown
### SQL Display Options

/**
 * @column amount type=int align=right format=number comma=true if<0:color=red
 */

**Common options:**
- align=right
- format=number comma=true
- if<0:color=red
```

### 3. PowerPointã‚³ãƒ”ãƒ¼

```markdown
### PowerPoint/Excel/Word Copy

1. TSV Copy - Simple format
2. HTML Copy - With styling

**Example workflow:**
Create query â†’ Execute â†’ HTML Copy â†’ Paste in PowerPoint
```

### 4. ã‚ˆãã‚ã‚‹ã‚¿ã‚¹ã‚¯

```markdown
### Common Tasks

**Generate formatted query:**
\`\`\`
Write a top 10 customers query with display options optimized for PowerPoint
\`\`\`
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆçµæœ

### âœ… æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- `.cursorrules` ãŒæ­£ã—ãä½œæˆã•ã‚Œã‚‹
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒæ­£ã—ãæ›¸ãè¾¼ã¾ã‚Œã‚‹
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå‹•ä½œã™ã‚‹

### âœ… æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- æ—¢å­˜ã® `.cursorrules` ã®æœ«å°¾ã«è¿½åŠ ã•ã‚Œã‚‹
- æ—¢å­˜ã®ãƒ«ãƒ¼ãƒ«ãŒä¿æŒã•ã‚Œã‚‹
- é©åˆ‡ãªç©ºè¡ŒãŒæŒ¿å…¥ã•ã‚Œã‚‹

### âœ… æ›´æ–°ãƒ†ã‚¹ãƒˆ
- æ—¢å­˜ã®QueryCanvasã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¤œå‡º
- æ›´æ–°ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- å¤ã„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒå‰Šé™¤ã•ã‚Œã€æ–°ã—ã„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¿½åŠ ã•ã‚Œã‚‹

### âœ… Cursor AI é€£æº
```
@Codebase PowerPointã«è²¼ã‚Šä»˜ã‘ã‚‰ã‚Œã‚‹ã‚¯ã‚¨ãƒªã‚’ä½œã£ã¦
```
â†’ Cursor AIãŒé©åˆ‡ã«å¿œç­”ã™ã‚‹ã“ã¨ã‚’ç¢ºèª

---

## ğŸ“Š ã‚³ãƒ¼ãƒ‰çµ±è¨ˆ

### æ–°è¦è¿½åŠ 
- **cursorRulesManager.ts**: 170è¡Œ
- **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„**: ~150è¡Œï¼ˆãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ï¼‰

### å¤‰æ›´è¡Œæ•°
- **extension.ts**: +7è¡Œ
- **databaseClientPanel.ts**: +20è¡Œ
- **package.json**: +4è¡Œ
- **README.md**: +15è¡Œ
- **CHANGELOG.md**: +8è¡Œ

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- **CURSOR-RULES-SETUP-FEATURE.md**: ~350è¡Œ
- **å®Ÿè£…è¨˜éŒ²**: ~200è¡Œï¼ˆã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

### åˆè¨ˆ
- **å®Ÿè£…ã‚³ãƒ¼ãƒ‰**: ~200è¡Œ
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: ~550è¡Œ
- **ç·è¨ˆ**: ~750è¡Œ

---

## ğŸ“ å­¦ã‚“ã ã“ã¨ãƒ»å·¥å¤«ã—ãŸã“ã¨

### 1. VS Code API

```typescript
// ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ•ã‚©ãƒ«ãƒ€ã®å–å¾—
const workspaceFolders = vscode.workspace.workspaceFolders;

// ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æ§‹ç¯‰
const cursorRulesPath = path.join(rootPath, '.cursorrules');

// ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
const doc = await vscode.workspace.openTextDocument(path);
await vscode.window.showTextDocument(doc);
```

### 2. ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ

```typescript
// æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
if (fs.existsSync(cursorRulesPath)) {
    content = fs.readFileSync(cursorRulesPath, 'utf8');
}

// ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿
fs.writeFileSync(cursorRulesPath, content, 'utf8');
```

### 3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³

```typescript
// ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
const choice = await vscode.window.showWarningMessage(
    'QueryCanvasã®ãƒ«ãƒ¼ãƒ«ã¯æ—¢ã«å­˜åœ¨ã—ã¾ã™ã€‚æ›´æ–°ã—ã¾ã™ã‹ï¼Ÿ',
    'ã¯ã„', 'ã„ã„ãˆ'
);

// æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ with ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
const choice = await vscode.window.showInformationMessage(
    'âœ… .cursorrules ã«QueryCanvasã®ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¾ã—ãŸï¼',
    'ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã', 'é–‰ã˜ã‚‹'
);
```

### 4. ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯

```typescript
// ãƒãƒ¼ã‚«ãƒ¼ã§ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è­˜åˆ¥
private static readonly SECTION_TITLE = '# QueryCanvas - Database Client Rules';

// ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®é–‹å§‹ã¨çµ‚äº†ã‚’æ¤œå‡º
if (line.includes(this.SECTION_TITLE)) {
    inQueryCanvasSection = true;
}
```

---

## ğŸš€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒªãƒƒãƒˆ

### Beforeï¼ˆæ‰‹å‹•è¨­å®šï¼‰
```
1. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€ (5åˆ†)
2. .cursorrules ã‚’ä½œæˆ/ç·¨é›† (3åˆ†)
3. QueryCanvasã®æ§‹æ–‡ã‚’ã‚³ãƒ”ãƒš (2åˆ†)
4. å‹•ä½œç¢ºèª (2åˆ†)
---
åˆè¨ˆ: 12åˆ†
```

### Afterï¼ˆè‡ªå‹•è¨­å®šï¼‰
```
1. ã€ŒğŸ“ Cursor AIè¨­å®šã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ (3ç§’)
2. å®Œäº†ï¼
---
åˆè¨ˆ: 3ç§’
```

**240å€ã®æ™‚é–“çŸ­ç¸®ï¼** ğŸš€

---

## ğŸ’¼ ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤

### 1. **æ¡ç”¨ä¿ƒé€²**
- ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒç°¡å˜ â†’ è©¦ã—ã‚„ã™ã„
- ã™ãã«ä½¿ãˆã‚‹ â†’ é›¢è„±ç‡ä½ä¸‹

### 2. **å·®åˆ¥åŒ–**
- ä»–ã®DBæ‹¡å¼µæ©Ÿèƒ½ã«ã¯ãªã„æ©Ÿèƒ½
- Cursor AIçµ±åˆã®å…ˆé€²æ€§ã‚’ã‚¢ãƒ”ãƒ¼ãƒ«

### 3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**
- åˆå¿ƒè€…ã«å„ªã—ã„
- ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã«ã‚‚ä¾¿åˆ©

### 4. **ä¿å®ˆæ€§**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã® `.cursorrules` ã‚’ä¸€å…ƒç®¡ç†
- æ›´æ–°ãŒç°¡å˜

---

## ğŸ”® ä»Šå¾Œã®æ‹¡å¼µæ¡ˆ

### Phase 2ï¼ˆè¿‘ã„å°†æ¥ï¼‰
- [ ] ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã®è‡ªå‹•è¿½åŠ 
  ```markdown
  ### Available Tables
  - users - See querycanvas-schema/tables/users.md
  - orders - See querycanvas-schema/tables/orders.md
  ```

- [ ] æ¥ç¶šãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±
  ```markdown
  ### Database Connections
  - production-db (MySQL)
  - staging-db (PostgreSQL)
  ```

- [ ] ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚ªãƒ—ã‚·ãƒ§ãƒ³
  ```typescript
  const choice = await vscode.window.showQuickPick([
      { label: 'åŸºæœ¬ãƒ«ãƒ¼ãƒ«', value: 'basic' },
      { label: 'åŸºæœ¬ + ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±', value: 'with-schema' },
      { label: 'å®Œå…¨ç‰ˆ', value: 'full' }
  ]);
  ```

### Phase 3ï¼ˆå°†æ¥ï¼‰
- [ ] è‡ªå‹•æ›´æ–°é€šçŸ¥
  - æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒªãƒªãƒ¼ã‚¹æ™‚ã«é€šçŸ¥
  - ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ `.cursorrules` ã‚’æœ€æ–°ç‰ˆã«æ›´æ–°

- [ ] ãƒãƒ¼ãƒ å…±æœ‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
  - ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã«å…±æœ‰

- [ ] AIå­¦ç¿’æ©Ÿèƒ½
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å­¦ç¿’
  - ã‚ˆãä½¿ã†ã‚¯ã‚¨ãƒªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ `.cursorrules` ã«è¿½åŠ 

---

## âœ¨ ã¾ã¨ã‚

**Cursor AIçµ±åˆãŒã•ã‚‰ã«å¼·åŒ–ã•ã‚Œã¾ã—ãŸï¼**

### å®Ÿè£…ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ
1. âœ… ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
2. âœ… ã‚¹ãƒãƒ¼ãƒˆæ›´æ–°ãƒ­ã‚¸ãƒƒã‚¯
3. âœ… ãƒªãƒƒãƒãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
4. âœ… åŒ…æ‹¬çš„ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®å½±éŸ¿
- **ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚é–“:** 12åˆ† â†’ 3ç§’ï¼ˆ240å€é«˜é€ŸåŒ–ï¼‰
- **ã‚¨ãƒ©ãƒ¼ç‡:** å¤§å¹…æ¸›å°‘ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
- **å­¦ç¿’ã‚³ã‚¹ãƒˆ:** å¤§å¹…è»½æ¸›ï¼ˆã™ãä½¿ãˆã‚‹ï¼‰

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†
2. Phase 2 æ©Ÿèƒ½ã®æ¤œè¨
3. VS Code Marketplaceå…¬é–‹æº–å‚™

---

**å®Ÿè£…è€…:** AI Assistant (Claude Sonnet 4.5)  
**å®Ÿè£…æ™‚é–“:** ç´„45åˆ†  
**å®Ÿè£…å“è³ª:** Production Ready âœ…

ğŸ‰ **å®Ÿè£…å®Œäº†ï¼ç´ æ™´ã‚‰ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼**

